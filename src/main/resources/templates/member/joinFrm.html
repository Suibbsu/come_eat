<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
	<title>join</title>
	<!-- 구글 폰트 -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
    <!-- jquery -->
    <script src="/js/jquery-3.6.0.js"></script>
	<link rel="stylesheet" href="/css/joinFrm.css">
	
</head>
<body>
	<th:block th:include="common/header"></th:block>
	<div class="content-wrap">
        <div class="content-title">JOIN</div>
        <form name="checkIdFrm" action="/member/checkId" method="post">
        	<input type="hidden" name="checkId">
        </form>
       	<!-- 회원 가입을 위한  form 태그 -->
       	<form action="/member/signup" method="post" id="signupFrm">
       		<div class="input-wrap">
       			<label for="memberId">아이디</label>
       			<div class=id-wrap>
       				<input type="text" name="memberId" id="memberId" class="input-form" required>
       				<!-- 기능용 버튼 *button type="button" -->
       				<button type="button" id="idChkBtn" class="btn">중복체크</button>
       			</div>
       		</div>
       		<div class="input-wrap">
       			<label for="memberPw">비밀번호</label>
       			<input type="password" name="memberPw" id="memberPw" class="input-form" placeholder="영문+숫자+특수문자 를 조합하여 8~16자리를 입력해주세요" required>
       			<span class="comment"></span>
       		</div>
       		<div class="input-wrap">
       			<label for="memberPwRe">비밀번호확인</label>
       			<input type="password" name="memberPwRe" id="memberPwRe" class="input-form" required>
       			<span class="comment"></span>
       		</div>
       		<div class="input-wrap">
       			<label for="memberName">이름</label>
       			<input type="text" name="memberName" id="memberName" class="input-form" placeholder="ex)홍길동" required>
       			<span class="comment"></span>
       		</div>
       		<div class="input-wrap">
       			<label for="memberEmail">이메일</label>
       			<input type="text" name="memberEmail" id="memberEmail" class="input-form" placeholder="'@'포함한 이메일 형식으로 입력해주세요">
       		<div class="input-wrap">
       			<label for="memberPhone">핸드폰번호</label>
       			<input type="text" name="memberPhone" id="memberPhone" class="input-form" placeholder="ex)010-0000-0000" required >
       		</div>
       		<div class="submit-btn">
       			<button type="submit" class="btn">회원가입</button>
       		</div>
       	</form>
    </div>
    <th:block th:include="common/footer"></th:block>
    
    
    <script>
    
    //id 중복체크
     $("#idChkBtn").on("click",function(){
    	 inputVal = $("#memberId").val();
    	 /*console.log(inputVal);*/
    	 $("[name=checkId]").val(inputVal);
    	 window.open("","checkId","left=700px,top=300px,width=300px,height=200px,menubar=no,status=no,scrollbar=yes");
    	 /* form태그와 새창(="checkId") 연결" */
    	 $("[name=checkIdFrm]").attr("target","checkId");
    	 $("[name=checkIdFrm]").submit(); 
     });
    
    const comment = $(".comment");
    //비밀번호 정규식 체크
    $("#memberPw").on("change",function(){
    const pwReg = /^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,16}$/;
    const inputPw = $(this).val();
    const check = pwReg.test(inputPw);

    if(check){
        comment.eq(0).text("사용가능한 비밀번호 입니다.");
        comment.eq(0).css("color","black");
        comment.eq(0).css("font-size","12px");
        comment.eq(0).css("font-weight","400");

    }else{
        comment.eq(0).text("영문+숫자+특수문자를 조합하여 8~16자리를 입력해주세요.");
        comment.eq(0).css("color","red");
        comment.eq(0).css("font-size","12px");
    	comment.eq(0).css("font-weight","400");
    	}
    });
    //비밀번호 중복 체크
    $("#memberPwRe").on("change",function(){
    //비밀번호 확인 : 비밀번호와 값이 같은지
    const pwValue = $("#memberPw").val();
    const pwReValue = $("#memberPwRe").val();
    if(pwValue == pwReValue){
        comment.eq(1).text("비밀번호가 일치합니다.");
        comment.eq(1).css("color","black");
        comment.eq(1).css("font-size","12px");
        comment.eq(1).css("font-weight","400");
    }else{
        comment.eq(1).text("비밀번호가 일치하지않습니다.");
        comment.eq(1).css("color","red");
        comment.eq(1).css("font-size","12px");
        comment.eq(1).css("font-weight","400");
    } 
});
    //이름 정규표현식 체크
    $("#memberName").on("change",function(){
    const nameReg = /^[가-힣]{2,}$/;
    const nameValue = $(this).val();
    const check = nameReg.test(nameValue);
    if(check){
        comment.eq(2).text("사용가능한 이름입니다.");
        comment.eq(2).css("color","black");
        comment.eq(2).css("font-size","12px");
        comment.eq(2).css("font-weight","400");
    }else{
        comment.eq(2).text("이름은 한글만(최소2글자) 입력 가능합니다.");
        comment.eq(2).css("color","red");
        comment.eq(2).css("font-size","12px");
        comment.eq(2).css("font-weight","400");1
    }
});
    
   
    </script>
</body>
</html>